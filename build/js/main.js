$(document).ready(function(){$(function(){$('.free-tools-all a[href^="/'+location.pathname.split("/")[1]+'"]').addClass("active")});var e=new Swiper(".gallery-top",{speed:800,spaceBetween:10,effect:"fade",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0,loopedSlides:6}),t=new Swiper(".gallery-thumbs",{speed:800,spaceBetween:10,centeredSlides:!0,slidesPerView:"auto",touchRatio:.2,slideToClickedSlide:!0,loop:!0,loopedSlides:6});(e.controller.control=t).controller.control=e;new Swiper(".swiper-help",{speed:1e3,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new Swiper(".swiper-testimonials",{speed:1e3,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});$(".navigation .item").mouseenter(function(){$(this).addClass("open")}).mouseleave(function(){$(this).removeClass("open")}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(".hover-tooltip").mouseenter(function(){$(this).find(".tooltip").show()}).mouseleave(function(){$(this).find(".tooltip").hide()});var o=$(".af_list");o.length&&$(window).scroll(function(){var e=$(window).scrollTop(),t=o.offset(),i=o.height();t.top<=e&&e<=t.top+i?$(".af_bar").addClass("fixed"):$(".af_bar").removeClass("fixed")});var n,i=$("#mainNav"),a=i.outerHeight()+15,s=i.find("a"),r=s.map(function(){var e=$($(this).attr("href"));if(e.length)return e});function l(e){var i=$(document).scrollTop();$(".guides__bar a").each(function(){var e=$(this),t=$(e.attr("href"));t.position().top<=i&&t.position().top+t.height()>i?($(".guides__bar a").removeClass("active"),e.addClass("active")):e.removeClass("active")})}s.click(function(e){var t=$(this).attr("href"),i="#"===t?0:$(t).offset().top-a+1;$("html, body").stop().animate({scrollTop:i+40},900),e.preventDefault()}),$(window).scroll(function(){var e=$(this).scrollTop()+a,t=r.map(function(){if($(this).offset().top<e)return this}),i=(t=t[t.length-1])&&t.length?t[0].id:"";n!==i&&(n=i,s.parent().removeClass("active").end().filter("[href='#"+i+"']").parent().addClass("active"))}),$(document).on("scroll",l),$('.guides__bar a[href^="#"]').on("click",function(e){e.preventDefault(),$(document).off("scroll"),$("a").each(function(){$(this).removeClass("active")}),$(this).addClass("active");var t=this.hash;$target=$(t),$("html, body").stop().animate({scrollTop:$target.offset().top},500,"swing",function(){window.location.hash=t,$(document).on("scroll",l)})}),$(".templates_filters li").on("click",function(e){$(this).toggleClass("active"),$(".temp_item").hide(),$(".templates_filters li.active").each(function(){var e=$(this).data("categoryType");$('.temp_item[data-category-type="'+e+'"]').show()}),$(".templates_filters li.active").length<1&&$(".temp_item").show()}),$(document).on("ready",function(){var e,t,i=$(window).height(),o=$(document).height(),n=$("progress");e=o-i,n.attr("max",e),$(document).on("scroll",function(){t=$(window).scrollTop(),n.attr("value",t)})}),$(window).scroll(function(){500<=$(window).scrollTop()?$(".sticky_header").show():$(".sticky_header").hide()}),$(".pricing_item__btn .btn_green").on("click",function(){$(".popup-button .material-icons").click()});var c=[];$(".swiper-container").each(function(e,t){$(this).addClass("s"+e);var i=new Swiper(".s"+e,{observer:!0,observeParents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});c.push(i)}),$(window).innerWidth()<=767?$(".header_mobile .header_nav .menu-item-has-children").on("click",function(){$(this).toggleClass("active")}):$(".menu-item-has-children").mouseenter(function(){$(this).addClass("active"),$(this).children(".sub-menu").stop().show()}).mouseleave(function(){$(this).removeClass("active"),$(this).children(".sub-menu").stop().hide()}),$(".header_wrap__icon").on("click",function(){$(".header_mobile").fadeIn(),$("html").addClass("over")}),$(".header_mobile__top .close").on("click",function(){$(".header_mobile").fadeOut(),$("html").removeClass("over")}),$(".pricing_all").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},800)}),$(".how_header__text a").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},800)}),$(".glossary_list__letters .box a").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},1e3)}),$(function(){$("#contact_options").change(function(){$(".contacts__item").hide(),$("#"+$(this).val()).show()})}),$(".integration_item").on("click",function(e){e.preventDefault(),$(".integration_item").removeClass("active"),$(this).addClass("active");var t=$(this).attr("value");$(".integration_info").each(function(){$(this).hide(),$(this).attr("data-filter")==t&&$(this).show()})});var h=function(e){var t=$("#filters ."+e+":checked").map(function(){return'[data-filter*="'+this.value+'"]'}).get().join(",");return t=0<t.length?t:"*"};$("#filters select").change(function(){var e=$(".filterme"),t=e.filter(h("category")).filter(h("cost")).filter(h("features")).filter(h("rating"));e.not(t).hide(),t.show()}),$(".accordion .btn").on("click",function(){$(this).toggleClass("opened")})}),AOS.init({once:!1}),$(document).ready(function(){});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic3BsaXQiLCJhZGRDbGFzcyIsImdhbGxlcnlUb3AiLCJTd2lwZXIiLCJzcGVlZCIsInNwYWNlQmV0d2VlbiIsImVmZmVjdCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJsb29wIiwibG9vcGVkU2xpZGVzIiwiZ2FsbGVyeVRodW1icyIsImNlbnRlcmVkU2xpZGVzIiwic2xpZGVzUGVyVmlldyIsInRvdWNoUmF0aW8iLCJzbGlkZVRvQ2xpY2tlZFNsaWRlIiwiY29udHJvbGxlciIsImNvbnRyb2wiLCJtb3VzZWVudGVyIiwidGhpcyIsIm1vdXNlbGVhdmUiLCJyZW1vdmVDbGFzcyIsInRvb2x0aXAiLCJmaW5kIiwic2hvdyIsImhpZGUiLCJjb250ZW50IiwibGVuZ3RoIiwid2luZG93Iiwic2Nyb2xsIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwiaGVpZ2h0IiwidG9wIiwibGFzdElkIiwidG9wTWVudSIsInRvcE1lbnVIZWlnaHQiLCJvdXRlckhlaWdodCIsIm1lbnVJdGVtcyIsInNjcm9sbEl0ZW1zIiwibWFwIiwiaXRlbSIsImF0dHIiLCJvblNjcm9sbCIsImV2ZW50Iiwic2Nyb2xsUG9zIiwiZWFjaCIsImN1cnJMaW5rIiwicmVmRWxlbWVudCIsInBvc2l0aW9uIiwiY2xpY2siLCJlIiwiaHJlZiIsIm9mZnNldFRvcCIsInN0b3AiLCJhbmltYXRlIiwicHJldmVudERlZmF1bHQiLCJmcm9tVG9wIiwiY3VyIiwiaWQiLCJwYXJlbnQiLCJlbmQiLCJmaWx0ZXIiLCJvbiIsIm9mZiIsInRhcmdldCIsImhhc2giLCIkdGFyZ2V0IiwidG9nZ2xlQ2xhc3MiLCJjYXQiLCJkYXRhIiwibWF4IiwidmFsdWUiLCJ3aW5IZWlnaHQiLCJkb2NIZWlnaHQiLCJwcm9ncmVzc0JhciIsInNsaWRlcnMiLCJpbmRleCIsImVsZW1lbnQiLCJzbGlkZXIiLCJvYnNlcnZlciIsIm9ic2VydmVQYXJlbnRzIiwicHVzaCIsImlubmVyV2lkdGgiLCJjaGlsZHJlbiIsImZhZGVJbiIsImZhZGVPdXQiLCJjaGFuZ2UiLCJ2YWwiLCJnZXRGaWx0ZXIiLCJjYXRlZ29yeSIsImdldCIsImpvaW4iLCJhbGwiLCJ0Z3RzIiwibm90IiwiQU9TIiwiaW5pdCIsIm9uY2UiXSwibWFwcGluZ3MiOiJBQUdBQSxFQUFHQyxVQUFXQyxNQUFNLFdBSWhCRixFQUFFLFdBQ0VBLEVBQUUsNkJBQStCRyxTQUFTQyxTQUFTQyxNQUFNLEtBQUssR0FBSyxNQUFNQyxTQUFTLFlBS3RGLElBQUlDLEVBQWEsSUFBSUMsT0FBTyxlQUFnQixDQUN4Q0MsTUFBTyxJQUNQQyxhQUFjLEdBQ2RDLE9BQVEsT0FDUkMsV0FBWSxDQUNSQyxPQUFRLHNCQUNSQyxPQUFRLHVCQUVaQyxNQUFNLEVBQ05DLGFBQWMsSUFFZEMsRUFBZ0IsSUFBSVQsT0FBTyxrQkFBbUIsQ0FDOUNDLE1BQU8sSUFDUEMsYUFBYyxHQUNkUSxnQkFBZ0IsRUFDaEJDLGNBQWUsT0FDZkMsV0FBWSxHQUNaQyxxQkFBcUIsRUFDckJOLE1BQU0sRUFDTkMsYUFBYyxLQUVsQlQsRUFBV2UsV0FBV0MsUUFBVU4sR0FDbEJLLFdBQVdDLFFBQVVoQixFQUl0QixJQUFJQyxPQUFPLGVBQWdCLENBQ3BDQyxNQUFPLElBQ1BHLFdBQVksQ0FDUkMsT0FBUSxzQkFDUkMsT0FBUSx5QkFNSCxJQUFJTixPQUFPLHVCQUF3QixDQUM1Q0MsTUFBTyxJQUNQRyxXQUFZLENBQ1JDLE9BQVEsc0JBQ1JDLE9BQVEseUJBTWhCZCxFQUFFLHFCQUFxQndCLFdBQVcsV0FDOUJ4QixFQUFFeUIsTUFBTW5CLFNBQVMsVUFDbEJvQixXQUFXLFdBQ1YxQixFQUFFeUIsTUFBTUUsWUFBWSxVQUt4QjNCLEVBQUUsV0FDRUEsRUFBRSwyQkFBMkI0QixZQUtqQzVCLEVBQUUsa0JBQWtCd0IsV0FBVyxXQUMzQnhCLEVBQUV5QixNQUFNSSxLQUFLLFlBQVlDLFNBQzFC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T0FDTC9CLEVBQUV5QixNQUFNdUIsS0FBSyxnQkFBa0JpQixHQUM5QmpFLEVBQUV5QixNQUFNSyxXQU9wQixJQUFJaUUsRUFBWSxTQUFVQyxHQUN0QixJQUFJNUIsRUFBU3BFLEVBQUUsYUFBZWdHLEVBQVcsWUFBWWxELElBQUksV0FDckQsTUFBTyxrQkFBb0JyQixLQUFLcUQsTUFBUSxPQUN6Q21CLE1BQU1DLEtBQUssS0FFZCxPQURBOUIsRUFBMEIsRUFBaEJBLEVBQU9uQyxPQUFjbUMsRUFBUyxLQUk1Q3BFLEVBQUUsbUJBQW1CNkYsT0FBTyxXQUN4QixJQUFJTSxFQUFNbkcsRUFBRSxhQUNSb0csRUFBT0QsRUFBSS9CLE9BQU8yQixFQUFVLGFBQWEzQixPQUFPMkIsRUFBVSxTQUFTM0IsT0FBTzJCLEVBQVUsYUFBYTNCLE9BQU8yQixFQUFVLFdBQ3RISSxFQUFJRSxJQUFJRCxHQUFNckUsT0FDZHFFLEVBQUt0RSxTQUtUOUIsRUFBRSxtQkFBbUJxRSxHQUFHLFFBQVMsV0FDN0JyRSxFQUFFeUIsTUFBTWlELFlBQVksY0FNNUI0QixJQUFJQyxLQUFLLENBQ0xDLE1BQU0sSUFHVnhHLEVBQUdDLFVBQVdDLE1BQU0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDdXN0b21cbiAqL1xuJCggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgIC8vIEZyZWUgdG9vbHMgYWN0aXZlIHVybFxuXG4gICAgJChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLmZyZWUtdG9vbHMtYWxsIGFbaHJlZl49XCIvJyArIGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVsxXSArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAvLyBUZXN0aW1vbmlhbHMgc2xpZGVyXG5cbiAgICB2YXIgZ2FsbGVyeVRvcCA9IG5ldyBTd2lwZXIoJy5nYWxsZXJ5LXRvcCcsIHtcbiAgICAgICAgc3BlZWQ6IDgwMCxcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcbiAgICAgICAgZWZmZWN0OiAnZmFkZScsXG4gICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXG4gICAgICAgIH0sXG4gICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgIGxvb3BlZFNsaWRlczogNlxuICAgIH0pO1xuICAgIHZhciBnYWxsZXJ5VGh1bWJzID0gbmV3IFN3aXBlcignLmdhbGxlcnktdGh1bWJzJywge1xuICAgICAgICBzcGVlZDogODAwLFxuICAgICAgICBzcGFjZUJldHdlZW46IDEwLFxuICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcbiAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxuICAgICAgICB0b3VjaFJhdGlvOiAwLjIsXG4gICAgICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IHRydWUsXG4gICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgIGxvb3BlZFNsaWRlczogNlxuICAgIH0pO1xuICAgIGdhbGxlcnlUb3AuY29udHJvbGxlci5jb250cm9sID0gZ2FsbGVyeVRodW1icztcbiAgICBnYWxsZXJ5VGh1bWJzLmNvbnRyb2xsZXIuY29udHJvbCA9IGdhbGxlcnlUb3A7XG5cbiAgICAvLyBDdXN0b21lciBzdWNjZXNzIGhlbHBcblxuICAgIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcuc3dpcGVyLWhlbHAnLCB7XG4gICAgICAgIHNwZWVkOiAxMDAwLFxuICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQ3VzdG9tZXIgc3VjY2VzcyB0ZXN0aW1vbmlhbHNcblxuICAgIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcuc3dpcGVyLXRlc3RpbW9uaWFscycsIHtcbiAgICAgICAgc3BlZWQ6IDEwMDAsXG4gICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBOYXZpZ2F0aW9uXG5cbiAgICAkKFwiLm5hdmlnYXRpb24gLml0ZW1cIikubW91c2VlbnRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnb3BlbicpO1xuICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgICB9KTtcblxuICAgIC8vIFRvb2x0aXBcblxuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykudG9vbHRpcCgpXG4gICAgfSk7XG5cbiAgICAvLyBQcmljaW5nIHRvb2x0b3BcblxuICAgICQoXCIuaG92ZXItdG9vbHRpcFwiKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLmZpbmQoJy50b29sdGlwJykuc2hvdygpO1xuICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykuZmluZCgnLnRvb2x0aXAnKS5oaWRlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBBbGwgZmVhdHVyZXMgZml4ZWQgYmFyXG5cbiAgICB2YXIgY29udGVudCA9ICQoJy5hZl9saXN0Jyk7XG4gICAgaWYgKGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGNvbnRlbnQub2Zmc2V0KCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gY29udGVudC5oZWlnaHQoKTtcbiAgICAgICAgICAgIGlmIChvZmZzZXQudG9wIDw9IHNjcm9sbCAmJiBzY3JvbGwgPD0gb2Zmc2V0LnRvcCArIGhlaWdodCkge1xuICAgICAgICAgICAgICAgICQoJy5hZl9iYXInKS5hZGRDbGFzcyhcImZpeGVkXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuYWZfYmFyJykucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENhY2hlIHNlbGVjdG9yc1xuXG4gICAgdmFyIGxhc3RJZCxcbiAgICAgICAgdG9wTWVudSA9ICQoXCIjbWFpbk5hdlwiKSxcbiAgICAgICAgdG9wTWVudUhlaWdodCA9IHRvcE1lbnUub3V0ZXJIZWlnaHQoKSsxNSxcbiAgICAgICAgbWVudUl0ZW1zID0gdG9wTWVudS5maW5kKFwiYVwiKSxcbiAgICAgICAgc2Nyb2xsSXRlbXMgPSBtZW51SXRlbXMubWFwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgaXRlbSA9ICQoJCh0aGlzKS5hdHRyKFwiaHJlZlwiKSk7XG4gICAgICAgICAgICBpZiAoaXRlbS5sZW5ndGgpIHsgcmV0dXJuIGl0ZW07IH1cbiAgICAgICAgfSk7XG5cbiAgICBtZW51SXRlbXMuY2xpY2soZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKSxcbiAgICAgICAgICAgIG9mZnNldFRvcCA9IGhyZWYgPT09IFwiI1wiID8gMCA6ICQoaHJlZikub2Zmc2V0KCkudG9wLXRvcE1lbnVIZWlnaHQrMTtcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogb2Zmc2V0VG9wICsgNDBcbiAgICAgICAgfSwgOTAwKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZnJvbVRvcCA9ICQodGhpcykuc2Nyb2xsVG9wKCkrdG9wTWVudUhlaWdodDtcblxuICAgICAgICB2YXIgY3VyID0gc2Nyb2xsSXRlbXMubWFwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5vZmZzZXQoKS50b3AgPCBmcm9tVG9wKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9KTtcbiAgICAgICAgY3VyID0gY3VyW2N1ci5sZW5ndGgtMV07XG4gICAgICAgIHZhciBpZCA9IGN1ciAmJiBjdXIubGVuZ3RoID8gY3VyWzBdLmlkIDogXCJcIjtcblxuICAgICAgICBpZiAobGFzdElkICE9PSBpZCkge1xuICAgICAgICAgICAgbGFzdElkID0gaWQ7XG4gICAgICAgICAgICBtZW51SXRlbXNcbiAgICAgICAgICAgICAgICAucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICAuZW5kKCkuZmlsdGVyKFwiW2hyZWY9JyNcIitpZCtcIiddXCIpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBHdWlkZXMgYWRkIGNsYXNzIHNjcm9sbFxuXG4gICAgJChkb2N1bWVudCkub24oXCJzY3JvbGxcIiwgb25TY3JvbGwpO1xuXG4gICAgJCgnLmd1aWRlc19fYmFyIGFbaHJlZl49XCIjXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKGRvY3VtZW50KS5vZmYoXCJzY3JvbGxcIik7XG5cbiAgICAgICAgJCgnYScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5oYXNoLFxuICAgICAgICAgICAgbWVudSA9IHRhcmdldDtcbiAgICAgICAgJHRhcmdldCA9ICQodGFyZ2V0KTtcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgICAgICdzY3JvbGxUb3AnOiAkdGFyZ2V0Lm9mZnNldCgpLnRvcFxuICAgICAgICB9LCA1MDAsICdzd2luZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdGFyZ2V0O1xuICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJzY3JvbGxcIiwgb25TY3JvbGwpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIG9uU2Nyb2xsKGV2ZW50KXtcbiAgICAgICAgdmFyIHNjcm9sbFBvcyA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xuICAgICAgICAkKCcuZ3VpZGVzX19iYXIgYScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN1cnJMaW5rID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHZhciByZWZFbGVtZW50ID0gJChjdXJyTGluay5hdHRyKFwiaHJlZlwiKSk7XG4gICAgICAgICAgICBpZiAocmVmRWxlbWVudC5wb3NpdGlvbigpLnRvcCA8PSBzY3JvbGxQb3MgJiYgcmVmRWxlbWVudC5wb3NpdGlvbigpLnRvcCArIHJlZkVsZW1lbnQuaGVpZ2h0KCkgPiBzY3JvbGxQb3MpIHtcbiAgICAgICAgICAgICAgICAkKCcuZ3VpZGVzX19iYXIgYScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIGN1cnJMaW5rLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBjdXJyTGluay5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVGVtcGxhdGVzIGZpbHRlciBzaG93L2hpZGVcblxuICAgICQoJy50ZW1wbGF0ZXNfZmlsdGVycyBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcudGVtcF9pdGVtJykuaGlkZSgpO1xuICAgICAgICAkKCcudGVtcGxhdGVzX2ZpbHRlcnMgbGkuYWN0aXZlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjYXQ9ICQodGhpcykuZGF0YSgnY2F0ZWdvcnlUeXBlJyk7XG4gICAgICAgICAgICAkKCcudGVtcF9pdGVtW2RhdGEtY2F0ZWdvcnktdHlwZT1cIicrY2F0KydcIl0nKS5zaG93KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoJCgnLnRlbXBsYXRlc19maWx0ZXJzIGxpLmFjdGl2ZScpLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICQoJy50ZW1wX2l0ZW0nKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFByb2dyZXNzXG5cbiAgICAkKGRvY3VtZW50KS5vbigncmVhZHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHdpbkhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSxcbiAgICAgICAgICAgIGRvY0hlaWdodCA9ICQoZG9jdW1lbnQpLmhlaWdodCgpLFxuICAgICAgICAgICAgcHJvZ3Jlc3NCYXIgPSAkKCdwcm9ncmVzcycpLFxuICAgICAgICAgICAgbWF4LCB2YWx1ZTtcblxuICAgICAgICAvKiBTZXQgdGhlIG1heCBzY3JvbGxhYmxlIGFyZWEgKi9cbiAgICAgICAgbWF4ID0gZG9jSGVpZ2h0IC0gd2luSGVpZ2h0O1xuICAgICAgICBwcm9ncmVzc0Jhci5hdHRyKCdtYXgnLCBtYXgpO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFsdWUgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICBwcm9ncmVzc0Jhci5hdHRyKCd2YWx1ZScsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgIGlmIChzY3JvbGwgPj0gNTAwKSB7XG4gICAgICAgICAgICAkKFwiLnN0aWNreV9oZWFkZXJcIikuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIi5zdGlja3lfaGVhZGVyXCIpLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUHJpY2luZ1xuXG4gICAgJCgnLnByaWNpbmdfaXRlbV9fYnRuIC5idG5fZ3JlZW4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5wb3B1cC1idXR0b24gLm1hdGVyaWFsLWljb25zJykuY2xpY2soKTtcbiAgICB9KTtcblxuICAgIC8vIFNsaWRlciB0YWJzXG5cbiAgICB2YXIgc2xpZGVycyA9IFtdO1xuXG4gICAgJCgnLnN3aXBlci1jb250YWluZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KXtcblxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdzJytpbmRleCk7XG4gICAgICAgIHZhciBzbGlkZXIgPSBuZXcgU3dpcGVyKCcucycraW5kZXgsIHtcbiAgICAgICAgICAgIG9ic2VydmVyOiB0cnVlLFxuICAgICAgICAgICAgb2JzZXJ2ZVBhcmVudHM6IHRydWUsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVycy5wdXNoKHNsaWRlcik7XG5cbiAgICB9KTtcblxuICAgIC8vIEhvdmVyIG5hdlxuXG4gICAgaWYoJCh3aW5kb3cpLmlubmVyV2lkdGgoKSA8PSA3NjcpIHtcbiAgICAgICAgJCgnLmhlYWRlcl9tb2JpbGUgLmhlYWRlcl9uYXYgLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJCgnLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4nKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcuc3ViLW1lbnUnKS5zdG9wKCkuc2hvdygpXG4gICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5zdWItbWVudScpLnN0b3AoKS5oaWRlKClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTW9iaWxlIG5hdlxuXG4gICAgJCgnLmhlYWRlcl93cmFwX19pY29uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICQoJy5oZWFkZXJfbW9iaWxlJykuZmFkZUluKCk7XG4gICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdvdmVyJyk7XG4gICAgfSk7XG5cbiAgICAkKCcuaGVhZGVyX21vYmlsZV9fdG9wIC5jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmhlYWRlcl9tb2JpbGUnKS5mYWRlT3V0KCk7XG4gICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnb3ZlcicpO1xuICAgIH0pO1xuXG4gICAgLy8gU2Nyb2xsIHRvIGVsZW1lbnRcblxuICAgICQoXCIucHJpY2luZ19hbGxcIikub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiAoJCh0YXJnZXQpLm9mZnNldCgpLnRvcClcbiAgICAgICAgfSwgODAwKTtcbiAgICB9KTtcblxuICAgICQoXCIuaG93X2hlYWRlcl9fdGV4dCBhXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogKCQodGFyZ2V0KS5vZmZzZXQoKS50b3ApXG4gICAgICAgIH0sIDgwMCk7XG4gICAgfSk7XG5cbiAgICAkKFwiLmdsb3NzYXJ5X2xpc3RfX2xldHRlcnMgLmJveCBhXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogKCQodGFyZ2V0KS5vZmZzZXQoKS50b3ApXG4gICAgICAgIH0sIDEwMDApO1xuICAgIH0pO1xuXG4gICAgLy8gQ29udGFjdCBvcHRpb25zXG5cbiAgICAkKGZ1bmN0aW9uKCkgeyAgICAvLyBNYWtlcyBzdXJlIHRoZSBjb2RlIGNvbnRhaW5lZCBkb2Vzbid0IHJ1biB1bnRpbFxuICAgICAgICAvLyAgICAgYWxsIHRoZSBET00gZWxlbWVudHMgaGF2ZSBsb2FkZWRcblxuICAgICAgICAkKCcjY29udGFjdF9vcHRpb25zJykuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKCcuY29udGFjdHNfX2l0ZW0nKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcjJyArICQodGhpcykudmFsKCkpLnNob3coKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIC8vIEludGVncmF0aW9uIHNob3cvaGlkZVxuXG5cbiAgICAkKCcuaW50ZWdyYXRpb25faXRlbScpLm9uKCBcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKCcuaW50ZWdyYXRpb25faXRlbScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIHZhciBpZCA9ICQodGhpcykuYXR0cigndmFsdWUnKTtcbiAgICAgICAgJChcIi5pbnRlZ3JhdGlvbl9pbmZvXCIpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAgICAgaWYoJCh0aGlzKS5hdHRyKCdkYXRhLWZpbHRlcicpID09IGlkKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gU2FsZXMgdG9vbHNcblxuICAgIHZhciBnZXRGaWx0ZXIgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgdmFyIGZpbHRlciA9ICQoXCIjZmlsdGVycyAuXCIgKyBjYXRlZ29yeSArIFwiOmNoZWNrZWRcIikubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnW2RhdGEtZmlsdGVyKj1cIicgKyB0aGlzLnZhbHVlICsgJ1wiXSc7XG4gICAgICAgIH0pLmdldCgpLmpvaW4oXCIsXCIpO1xuICAgICAgICBmaWx0ZXIgPSAoZmlsdGVyLmxlbmd0aCA+IDApID8gZmlsdGVyIDogXCIqXCI7XG4gICAgICAgIHJldHVybiBmaWx0ZXI7XG4gICAgfTtcblxuICAgICQoXCIjZmlsdGVycyBzZWxlY3RcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFsbCA9ICQoXCIuZmlsdGVybWVcIik7XG4gICAgICAgIHZhciB0Z3RzID0gYWxsLmZpbHRlcihnZXRGaWx0ZXIoXCJjYXRlZ29yeVwiKSkuZmlsdGVyKGdldEZpbHRlcihcImNvc3RcIikpLmZpbHRlcihnZXRGaWx0ZXIoXCJmZWF0dXJlc1wiKSkuZmlsdGVyKGdldEZpbHRlcihcInJhdGluZ1wiKSk7XG4gICAgICAgIGFsbC5ub3QodGd0cykuaGlkZSgpO1xuICAgICAgICB0Z3RzLnNob3coKTtcbiAgICB9KTtcblxuICAgIC8vIFJlZnVuZHMgYWNjb3JkaW9uXG5cbiAgICAkKCcuYWNjb3JkaW9uIC5idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW5lZCcpO1xuICAgIH0pO1xufSk7XG5cbi8vIEFPU1xuXG5BT1MuaW5pdCh7XG4gICAgb25jZTogZmFsc2UsXG59KTtcblxuJCggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgIC8vIEludGVyY29tIG9uIG1vYmlsZVxuXG4gICAgLy8gdmFyIGlzT25Nb2JpbGUgPSBmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgaWYod2luZG93LmlubmVyV2lkdGggPD0gODAwKSB7XG4gICAgLy8gICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyAgICAgfVxuICAgIC8vIH07XG4gICAgLy9cbiAgICAvLyBjb25zb2xlLmxvZyhpc09uTW9iaWxlKCkpO1xuICAgIC8vXG4gICAgLy8gd2luZG93LmludGVyY29tU2V0dGluZ3MgPSB7XG4gICAgLy8gICAgIGFwcF9pZDogJ3R0MjljZmg5JyxcbiAgICAvLyAgICAgZW1haWw6ICdzYXRoaXNoQGxpbWVjYWxsLmNvbScsXG4gICAgLy8gICAgIGhpZGVfZGVmYXVsdF9sYXVuY2hlcjogaXNPbk1vYmlsZSgpXG4gICAgLy8gfTtcblxufSk7Il19
