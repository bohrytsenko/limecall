$(document).ready(function(){$(function(){$('.free-tools-all a[href^="/'+location.pathname.split("/")[1]+'"]').addClass("active")});var e=new Swiper(".gallery-top",{speed:800,spaceBetween:10,effect:"fade",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0,loopedSlides:6}),t=new Swiper(".gallery-thumbs",{speed:800,spaceBetween:10,centeredSlides:!0,slidesPerView:"auto",touchRatio:.2,slideToClickedSlide:!0,loop:!0,loopedSlides:6});(e.controller.control=t).controller.control=e;new Swiper(".swiper-help",{speed:1e3,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new Swiper(".swiper-testimonials",{speed:1e3,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});$(".navigation .item").mouseenter(function(){$(this).addClass("open")}).mouseleave(function(){$(this).removeClass("open")}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(".hover-tooltip").mouseenter(function(){$(this).find(".tooltip").show()}).mouseleave(function(){$(this).find(".tooltip").hide()});var o=$(".af_list");o.length&&$(window).scroll(function(){var e=$(window).scrollTop(),t=o.offset(),i=o.height();t.top<=e&&e<=t.top+i?$(".af_bar").addClass("fixed"):$(".af_bar").removeClass("fixed")});var n,i=$("#mainNav"),a=i.outerHeight()+15,s=i.find("a"),r=s.map(function(){var e=$($(this).attr("href"));if(e.length)return e});function l(e){var i=$(document).scrollTop();$(".guides__bar a").each(function(){var e=$(this),t=$(e.attr("href"));t.position().top<=i&&t.position().top+t.height()>i?($(".guides__bar a").removeClass("active"),e.addClass("active")):e.removeClass("active")})}s.click(function(e){var t=$(this).attr("href"),i="#"===t?0:$(t).offset().top-a+1;$("html, body").stop().animate({scrollTop:40+i},900),e.preventDefault()}),$(window).scroll(function(){var e=$(this).scrollTop()+a,t=r.map(function(){if($(this).offset().top<e)return this}),i=(t=t[t.length-1])&&t.length?t[0].id:"";n!==i&&(n=i,s.parent().removeClass("active").end().filter("[href='#"+i+"']").parent().addClass("active"))}),$(document).on("scroll",l),$('.guides__bar a[href^="#"]').on("click",function(e){e.preventDefault(),$(document).off("scroll"),$("a").each(function(){$(this).removeClass("active")}),$(this).addClass("active");var t=this.hash;$target=$(t),$("html, body").stop().animate({scrollTop:$target.offset().top},500,"swing",function(){window.location.hash=t,$(document).on("scroll",l)})}),$(".templates_filters li").on("click",function(e){$(this).toggleClass("active"),$(".temp_item").hide(),$(".templates_filters li.active").each(function(){var e=$(this).data("categoryType");$('.temp_item[data-category-type="'+e+'"]').show()}),$(".templates_filters li.active").length<1&&$(".temp_item").show()}),$(document).on("ready",function(){var e,t,i=$(window).height(),o=$(document).height(),n=$("progress");e=o-i,n.attr("max",e),$(document).on("scroll",function(){t=$(window).scrollTop(),n.attr("value",t)})}),$(window).scroll(function(){500<=$(window).scrollTop()?$(".sticky_header").show():$(".sticky_header").hide()}),$(".pricing_item__btn .btn_green").on("click",function(){$(".popup-button .material-icons").click()});var c=[];$(".swiper-container").each(function(e,t){$(this).addClass("s"+e);var i=new Swiper(".s"+e,{observer:!0,observeParents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});c.push(i)}),$(window).innerWidth()<=767?$(".header_mobile .header_nav .menu-item-has-children").on("click",function(){$(this).toggleClass("active")}):$(".menu-item-has-children").mouseenter(function(){$(this).addClass("active"),$(this).children(".sub-menu").stop().show()}).mouseleave(function(){$(this).removeClass("active"),$(this).children(".sub-menu").stop().hide()}),$(".header_wrap__icon").on("click",function(){$(".header_mobile").fadeIn(),$("html").addClass("over")}),$(".header_mobile__top .close").on("click",function(){$(".header_mobile").fadeOut(),$("html").removeClass("over")}),$(".pricing_all").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},800)}),$(".how_header__text a").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},800)}),$(".glossary_list__letters .box a").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},1e3)}),$(function(){$("#contact_options").change(function(){$(".contacts__item").hide(),$("#"+$(this).val()).show()})}),$(".integration_item").on("click",function(e){e.preventDefault(),$(".integration_item").removeClass("active"),$(this).addClass("active");var t=$(this).attr("value");$(".integration_info").each(function(){$(this).hide(),$(this).attr("data-filter")==t&&$(this).show()})});function h(e){var t=$("#filters ."+e+":checked").map(function(){return'[data-filter*="'+this.value+'"]'}).get().join(",");return t=0<t.length?t:"*"}$("#filters select").change(function(){var e=$(".filterme"),t=e.filter(h("category")).filter(h("cost")).filter(h("features")).filter(h("rating"));e.not(t).hide(),t.show()}),$(".accordion .btn").on("click",function(){$(this).toggleClass("opened")})}),AOS.init({once:!1}),$(document).ready(function(){});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic3BsaXQiLCJhZGRDbGFzcyIsImdhbGxlcnlUb3AiLCJTd2lwZXIiLCJzcGVlZCIsInNwYWNlQmV0d2VlbiIsImVmZmVjdCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJsb29wIiwibG9vcGVkU2xpZGVzIiwiZ2FsbGVyeVRodW1icyIsImNlbnRlcmVkU2xpZGVzIiwic2xpZGVzUGVyVmlldyIsInRvdWNoUmF0aW8iLCJzbGlkZVRvQ2xpY2tlZFNsaWRlIiwiY29udHJvbGxlciIsImNvbnRyb2wiLCJtb3VzZWVudGVyIiwidGhpcyIsIm1vdXNlbGVhdmUiLCJyZW1vdmVDbGFzcyIsInRvb2x0aXAiLCJmaW5kIiwic2hvdyIsImhpZGUiLCJjb250ZW50IiwibGVuZ3RoIiwid2luZG93Iiwic2Nyb2xsIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwiaGVpZ2h0IiwidG9wIiwibGFzdElkIiwidG9wTWVudSIsInRvcE1lbnVIZWlnaHQiLCJvdXRlckhlaWdodCIsIm1lbnVJdGVtcyIsInNjcm9sbEl0ZW1zIiwibWFwIiwiaXRlbSIsImF0dHIiLCJvblNjcm9sbCIsImV2ZW50Iiwic2Nyb2xsUG9zIiwiZWFjaCIsImN1cnJMaW5rIiwicmVmRWxlbWVudCIsInBvc2l0aW9uIiwiY2xpY2siLCJlIiwiaHJlZiIsIm9mZnNldFRvcCIsInN0b3AiLCJhbmltYXRlIiwicHJldmVudERlZmF1bHQiLCJmcm9tVG9wIiwiY3VyIiwiaWQiLCJwYXJlbnQiLCJlbmQiLCJmaWx0ZXIiLCJvbiIsIm9mZiIsInRhcmdldCIsImhhc2giLCIkdGFyZ2V0IiwidG9nZ2xlQ2xhc3MiLCJjYXQiLCJkYXRhIiwibWF4IiwidmFsdWUiLCJ3aW5IZWlnaHQiLCJkb2NIZWlnaHQiLCJwcm9ncmVzc0JhciIsInNsaWRlcnMiLCJpbmRleCIsImVsZW1lbnQiLCJzbGlkZXIiLCJvYnNlcnZlciIsIm9ic2VydmVQYXJlbnRzIiwicHVzaCIsImlubmVyV2lkdGgiLCJjaGlsZHJlbiIsImZhZGVJbiIsImZhZGVPdXQiLCJjaGFuZ2UiLCJ2YWwiLCJnZXRGaWx0ZXIiLCJjYXRlZ29yeSIsImdldCIsImpvaW4iLCJhbGwiLCJ0Z3RzIiwibm90IiwiQU9TIiwiaW5pdCIsIm9uY2UiXSwibWFwcGluZ3MiOiJBQUdBQSxFQUFHQyxVQUFXQyxNQUFNLFdBSWhCRixFQUFFLFdBQ0VBLEVBQUUsNkJBQStCRyxTQUFTQyxTQUFTQyxNQUFNLEtBQUssR0FBSyxNQUFNQyxTQUFTLFlBS3RGLElBQUlDLEVBQWEsSUFBSUMsT0FBTyxlQUFnQixDQUN4Q0MsTUFBTyxJQUNQQyxhQUFjLEdBQ2RDLE9BQVEsT0FDUkMsV0FBWSxDQUNSQyxPQUFRLHNCQUNSQyxPQUFRLHVCQUVaQyxNQUFNLEVBQ05DLGFBQWMsSUFFZEMsRUFBZ0IsSUFBSVQsT0FBTyxrQkFBbUIsQ0FDOUNDLE1BQU8sSUFDUEMsYUFBYyxHQUNkUSxnQkFBZ0IsRUFDaEJDLGNBQWUsT0FDZkMsV0FBWSxHQUNaQyxxQkFBcUIsRUFDckJOLE1BQU0sRUFDTkMsYUFBYyxLQUVsQlQsRUFBV2UsV0FBV0MsUUFBVU4sR0FDbEJLLFdBQVdDLFFBQVVoQixFQUl0QixJQUFJQyxPQUFPLGVBQWdCLENBQ3BDQyxNQUFPLElBQ1BHLFdBQVksQ0FDUkMsT0FBUSxzQkFDUkMsT0FBUSx5QkFNSCxJQUFJTixPQUFPLHVCQUF3QixDQUM1Q0MsTUFBTyxJQUNQRyxXQUFZLENBQ1JDLE9BQVEsc0JBQ1JDLE9BQVEseUJBTWhCZCxFQUFFLHFCQUFxQndCLFdBQVcsV0FDOUJ4QixFQUFFeUIsTUFBTW5CLFNBQVMsVUFDbEJvQixXQUFXLFdBQ1YxQixFQUFFeUIsTUFBTUUsWUFBWSxVQUt4QjNCLEVBQUUsV0FDRUEsRUFBRSwyQkFBMkI0QixZQUtqQzVCLEVBQUUsa0JBQWtCd0IsV0FBVyxXQUMzQnhCLEVBQUV5QixNQUFNSSxLQUFLLFlBQVlDLFNBQzFC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T0FDTC9CLEVBQUV5QixNQUFNdUIsS0FBSyxnQkFBa0JpQixHQUM5QmpFLEVBQUV5QixNQUFNSyxXQU9KLFNBQVppRSxFQUFzQkMsR0FDdEIsSUFBSTVCLEVBQVNwRSxFQUFFLGFBQWVnRyxFQUFXLFlBQVlsRCxJQUFJLFdBQ3JELE1BQU8sa0JBQW9CckIsS0FBS3FELE1BQVEsT0FDekNtQixNQUFNQyxLQUFLLEtBRWQsT0FEQTlCLEVBQTBCLEVBQWhCQSxFQUFPbkMsT0FBY21DLEVBQVMsSUFJNUNwRSxFQUFFLG1CQUFtQjZGLE9BQU8sV0FDeEIsSUFBSU0sRUFBTW5HLEVBQUUsYUFDUm9HLEVBQU9ELEVBQUkvQixPQUFPMkIsRUFBVSxhQUFhM0IsT0FBTzJCLEVBQVUsU0FBUzNCLE9BQU8yQixFQUFVLGFBQWEzQixPQUFPMkIsRUFBVSxXQUN0SEksRUFBSUUsSUFBSUQsR0FBTXJFLE9BQ2RxRSxFQUFLdEUsU0FLVDlCLEVBQUUsbUJBQW1CcUUsR0FBRyxRQUFTLFdBQzdCckUsRUFBRXlCLE1BQU1pRCxZQUFZLGNBTTVCNEIsSUFBSUMsS0FBSyxDQUNMQyxNQUFNLElBR1Z4RyxFQUFHQyxVQUFXQyxNQUFNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ3VzdG9tXG4gKi9cbiQoIGRvY3VtZW50ICkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAvLyBGcmVlIHRvb2xzIGFjdGl2ZSB1cmxcblxuICAgICQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5mcmVlLXRvb2xzLWFsbCBhW2hyZWZePVwiLycgKyBsb2NhdGlvbi5wYXRobmFtZS5zcGxpdChcIi9cIilbMV0gKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgLy8gVGVzdGltb25pYWxzIHNsaWRlclxuXG4gICAgdmFyIGdhbGxlcnlUb3AgPSBuZXcgU3dpcGVyKCcuZ2FsbGVyeS10b3AnLCB7XG4gICAgICAgIHNwZWVkOiA4MDAsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMTAsXG4gICAgICAgIGVmZmVjdDogJ2ZhZGUnLFxuICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgICAgICB9LFxuICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICBsb29wZWRTbGlkZXM6IDZcbiAgICB9KTtcbiAgICB2YXIgZ2FsbGVyeVRodW1icyA9IG5ldyBTd2lwZXIoJy5nYWxsZXJ5LXRodW1icycsIHtcbiAgICAgICAgc3BlZWQ6IDgwMCxcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcbiAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXG4gICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcbiAgICAgICAgdG91Y2hSYXRpbzogMC4yLFxuICAgICAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlOiB0cnVlLFxuICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICBsb29wZWRTbGlkZXM6IDZcbiAgICB9KTtcbiAgICBnYWxsZXJ5VG9wLmNvbnRyb2xsZXIuY29udHJvbCA9IGdhbGxlcnlUaHVtYnM7XG4gICAgZ2FsbGVyeVRodW1icy5jb250cm9sbGVyLmNvbnRyb2wgPSBnYWxsZXJ5VG9wO1xuXG4gICAgLy8gQ3VzdG9tZXIgc3VjY2VzcyBoZWxwXG5cbiAgICB2YXIgc3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlci1oZWxwJywge1xuICAgICAgICBzcGVlZDogMTAwMCxcbiAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIEN1c3RvbWVyIHN1Y2Nlc3MgdGVzdGltb25pYWxzXG5cbiAgICB2YXIgc3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlci10ZXN0aW1vbmlhbHMnLCB7XG4gICAgICAgIHNwZWVkOiAxMDAwLFxuICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gTmF2aWdhdGlvblxuXG4gICAgJChcIi5uYXZpZ2F0aW9uIC5pdGVtXCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ29wZW4nKTtcbiAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgfSk7XG5cbiAgICAvLyBUb29sdGlwXG5cbiAgICAkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKVxuICAgIH0pO1xuXG4gICAgLy8gUHJpY2luZyB0b29sdG9wXG5cbiAgICAkKFwiLmhvdmVyLXRvb2x0aXBcIikubW91c2VlbnRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgJCh0aGlzKS5maW5kKCcudG9vbHRpcCcpLnNob3coKTtcbiAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLmZpbmQoJy50b29sdGlwJykuaGlkZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gQWxsIGZlYXR1cmVzIGZpeGVkIGJhclxuXG4gICAgdmFyIGNvbnRlbnQgPSAkKCcuYWZfbGlzdCcpO1xuICAgIGlmIChjb250ZW50Lmxlbmd0aCkge1xuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBjb250ZW50Lm9mZnNldCgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IGNvbnRlbnQuaGVpZ2h0KCk7XG4gICAgICAgICAgICBpZiAob2Zmc2V0LnRvcCA8PSBzY3JvbGwgJiYgc2Nyb2xsIDw9IG9mZnNldC50b3AgKyBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAkKCcuYWZfYmFyJykuYWRkQ2xhc3MoXCJmaXhlZFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmFmX2JhcicpLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDYWNoZSBzZWxlY3RvcnNcblxuICAgIHZhciBsYXN0SWQsXG4gICAgICAgIHRvcE1lbnUgPSAkKFwiI21haW5OYXZcIiksXG4gICAgICAgIHRvcE1lbnVIZWlnaHQgPSB0b3BNZW51Lm91dGVySGVpZ2h0KCkrMTUsXG4gICAgICAgIG1lbnVJdGVtcyA9IHRvcE1lbnUuZmluZChcImFcIiksXG4gICAgICAgIHNjcm9sbEl0ZW1zID0gbWVudUl0ZW1zLm1hcChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSAkKCQodGhpcykuYXR0cihcImhyZWZcIikpO1xuICAgICAgICAgICAgaWYgKGl0ZW0ubGVuZ3RoKSB7IHJldHVybiBpdGVtOyB9XG4gICAgICAgIH0pO1xuXG4gICAgbWVudUl0ZW1zLmNsaWNrKGZ1bmN0aW9uKGUpe1xuICAgICAgICB2YXIgaHJlZiA9ICQodGhpcykuYXR0cihcImhyZWZcIiksXG4gICAgICAgICAgICBvZmZzZXRUb3AgPSBocmVmID09PSBcIiNcIiA/IDAgOiAkKGhyZWYpLm9mZnNldCgpLnRvcC10b3BNZW51SGVpZ2h0KzE7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5zdG9wKCkuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6IG9mZnNldFRvcCArIDQwXG4gICAgICAgIH0sIDkwMCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGZyb21Ub3AgPSAkKHRoaXMpLnNjcm9sbFRvcCgpK3RvcE1lbnVIZWlnaHQ7XG5cbiAgICAgICAgdmFyIGN1ciA9IHNjcm9sbEl0ZW1zLm1hcChmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYgKCQodGhpcykub2Zmc2V0KCkudG9wIDwgZnJvbVRvcClcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSk7XG4gICAgICAgIGN1ciA9IGN1cltjdXIubGVuZ3RoLTFdO1xuICAgICAgICB2YXIgaWQgPSBjdXIgJiYgY3VyLmxlbmd0aCA/IGN1clswXS5pZCA6IFwiXCI7XG5cbiAgICAgICAgaWYgKGxhc3RJZCAhPT0gaWQpIHtcbiAgICAgICAgICAgIGxhc3RJZCA9IGlkO1xuICAgICAgICAgICAgbWVudUl0ZW1zXG4gICAgICAgICAgICAgICAgLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgLmVuZCgpLmZpbHRlcihcIltocmVmPScjXCIraWQrXCInXVwiKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gR3VpZGVzIGFkZCBjbGFzcyBzY3JvbGxcblxuICAgICQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIG9uU2Nyb2xsKTtcblxuICAgICQoJy5ndWlkZXNfX2JhciBhW2hyZWZePVwiI1wiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKFwic2Nyb2xsXCIpO1xuXG4gICAgICAgICQoJ2EnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuaGFzaCxcbiAgICAgICAgICAgIG1lbnUgPSB0YXJnZXQ7XG4gICAgICAgICR0YXJnZXQgPSAkKHRhcmdldCk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5zdG9wKCkuYW5pbWF0ZSh7XG4gICAgICAgICAgICAnc2Nyb2xsVG9wJzogJHRhcmdldC5vZmZzZXQoKS50b3BcbiAgICAgICAgfSwgNTAwLCAnc3dpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHRhcmdldDtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIG9uU2Nyb2xsKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBvblNjcm9sbChldmVudCl7XG4gICAgICAgIHZhciBzY3JvbGxQb3MgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgJCgnLmd1aWRlc19fYmFyIGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdXJyTGluayA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgcmVmRWxlbWVudCA9ICQoY3VyckxpbmsuYXR0cihcImhyZWZcIikpO1xuICAgICAgICAgICAgaWYgKHJlZkVsZW1lbnQucG9zaXRpb24oKS50b3AgPD0gc2Nyb2xsUG9zICYmIHJlZkVsZW1lbnQucG9zaXRpb24oKS50b3AgKyByZWZFbGVtZW50LmhlaWdodCgpID4gc2Nyb2xsUG9zKSB7XG4gICAgICAgICAgICAgICAgJCgnLmd1aWRlc19fYmFyIGEnKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBjdXJyTGluay5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgY3VyckxpbmsucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFRlbXBsYXRlcyBmaWx0ZXIgc2hvdy9oaWRlXG5cbiAgICAkKCcudGVtcGxhdGVzX2ZpbHRlcnMgbGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLnRlbXBfaXRlbScpLmhpZGUoKTtcbiAgICAgICAgJCgnLnRlbXBsYXRlc19maWx0ZXJzIGxpLmFjdGl2ZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY2F0PSAkKHRoaXMpLmRhdGEoJ2NhdGVnb3J5VHlwZScpO1xuICAgICAgICAgICAgJCgnLnRlbXBfaXRlbVtkYXRhLWNhdGVnb3J5LXR5cGU9XCInK2NhdCsnXCJdJykuc2hvdygpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCQoJy50ZW1wbGF0ZXNfZmlsdGVycyBsaS5hY3RpdmUnKS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAkKCcudGVtcF9pdGVtJykuc2hvdygpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBQcm9ncmVzc1xuXG4gICAgJChkb2N1bWVudCkub24oJ3JlYWR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3aW5IZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCksXG4gICAgICAgICAgICBkb2NIZWlnaHQgPSAkKGRvY3VtZW50KS5oZWlnaHQoKSxcbiAgICAgICAgICAgIHByb2dyZXNzQmFyID0gJCgncHJvZ3Jlc3MnKSxcbiAgICAgICAgICAgIG1heCwgdmFsdWU7XG5cbiAgICAgICAgLyogU2V0IHRoZSBtYXggc2Nyb2xsYWJsZSBhcmVhICovXG4gICAgICAgIG1heCA9IGRvY0hlaWdodCAtIHdpbkhlaWdodDtcbiAgICAgICAgcHJvZ3Jlc3NCYXIuYXR0cignbWF4JywgbWF4KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignc2Nyb2xsJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhbHVlID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuYXR0cigndmFsdWUnLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcblxuICAgICAgICBpZiAoc2Nyb2xsID49IDUwMCkge1xuICAgICAgICAgICAgJChcIi5zdGlja3lfaGVhZGVyXCIpLnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCIuc3RpY2t5X2hlYWRlclwiKS5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFByaWNpbmdcblxuICAgICQoJy5wcmljaW5nX2l0ZW1fX2J0biAuYnRuX2dyZWVuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcucG9wdXAtYnV0dG9uIC5tYXRlcmlhbC1pY29ucycpLmNsaWNrKCk7XG4gICAgfSk7XG5cbiAgICAvLyBTbGlkZXIgdGFic1xuXG4gICAgdmFyIHNsaWRlcnMgPSBbXTtcblxuICAgICQoJy5zd2lwZXItY29udGFpbmVyJykuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCl7XG5cbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygncycraW5kZXgpO1xuICAgICAgICB2YXIgc2xpZGVyID0gbmV3IFN3aXBlcignLnMnK2luZGV4LCB7XG4gICAgICAgICAgICBvYnNlcnZlcjogdHJ1ZSxcbiAgICAgICAgICAgIG9ic2VydmVQYXJlbnRzOiB0cnVlLFxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICAgICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlcnMucHVzaChzbGlkZXIpO1xuXG4gICAgfSk7XG5cbiAgICAvLyBIb3ZlciBuYXZcblxuICAgIGlmKCQod2luZG93KS5pbm5lcldpZHRoKCkgPD0gNzY3KSB7XG4gICAgICAgICQoJy5oZWFkZXJfbW9iaWxlIC5oZWFkZXJfbmF2IC5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoJy5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJykubW91c2VlbnRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnN1Yi1tZW51Jykuc3RvcCgpLnNob3coKVxuICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcuc3ViLW1lbnUnKS5zdG9wKCkuaGlkZSgpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1vYmlsZSBuYXZcblxuICAgICQoJy5oZWFkZXJfd3JhcF9faWNvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAkKCcuaGVhZGVyX21vYmlsZScpLmZhZGVJbigpO1xuICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnb3ZlcicpO1xuICAgIH0pO1xuXG4gICAgJCgnLmhlYWRlcl9tb2JpbGVfX3RvcCAuY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5oZWFkZXJfbW9iaWxlJykuZmFkZU91dCgpO1xuICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ292ZXInKTtcbiAgICB9KTtcblxuICAgIC8vIFNjcm9sbCB0byBlbGVtZW50XG5cbiAgICAkKFwiLnByaWNpbmdfYWxsXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogKCQodGFyZ2V0KS5vZmZzZXQoKS50b3ApXG4gICAgICAgIH0sIDgwMCk7XG4gICAgfSk7XG5cbiAgICAkKFwiLmhvd19oZWFkZXJfX3RleHQgYVwiKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICgkKHRhcmdldCkub2Zmc2V0KCkudG9wKVxuICAgICAgICB9LCA4MDApO1xuICAgIH0pO1xuXG4gICAgJChcIi5nbG9zc2FyeV9saXN0X19sZXR0ZXJzIC5ib3ggYVwiKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICgkKHRhcmdldCkub2Zmc2V0KCkudG9wKVxuICAgICAgICB9LCAxMDAwKTtcbiAgICB9KTtcblxuICAgIC8vIENvbnRhY3Qgb3B0aW9uc1xuXG4gICAgJChmdW5jdGlvbigpIHsgICAgLy8gTWFrZXMgc3VyZSB0aGUgY29kZSBjb250YWluZWQgZG9lc24ndCBydW4gdW50aWxcbiAgICAgICAgLy8gICAgIGFsbCB0aGUgRE9NIGVsZW1lbnRzIGhhdmUgbG9hZGVkXG5cbiAgICAgICAgJCgnI2NvbnRhY3Rfb3B0aW9ucycpLmNoYW5nZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgJCgnLmNvbnRhY3RzX19pdGVtJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnIycgKyAkKHRoaXMpLnZhbCgpKS5zaG93KCk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICAvLyBJbnRlZ3JhdGlvbiBzaG93L2hpZGVcblxuXG4gICAgJCgnLmludGVncmF0aW9uX2l0ZW0nKS5vbiggXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJCgnLmludGVncmF0aW9uX2l0ZW0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB2YXIgaWQgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XG4gICAgICAgICQoXCIuaW50ZWdyYXRpb25faW5mb1wiKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgICAgIGlmKCQodGhpcykuYXR0cignZGF0YS1maWx0ZXInKSA9PSBpZCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFNhbGVzIHRvb2xzXG5cbiAgICB2YXIgZ2V0RmlsdGVyID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XG4gICAgICAgIHZhciBmaWx0ZXIgPSAkKFwiI2ZpbHRlcnMgLlwiICsgY2F0ZWdvcnkgKyBcIjpjaGVja2VkXCIpLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1tkYXRhLWZpbHRlcio9XCInICsgdGhpcy52YWx1ZSArICdcIl0nO1xuICAgICAgICB9KS5nZXQoKS5qb2luKFwiLFwiKTtcbiAgICAgICAgZmlsdGVyID0gKGZpbHRlci5sZW5ndGggPiAwKSA/IGZpbHRlciA6IFwiKlwiO1xuICAgICAgICByZXR1cm4gZmlsdGVyO1xuICAgIH07XG5cbiAgICAkKFwiI2ZpbHRlcnMgc2VsZWN0XCIpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhbGwgPSAkKFwiLmZpbHRlcm1lXCIpO1xuICAgICAgICB2YXIgdGd0cyA9IGFsbC5maWx0ZXIoZ2V0RmlsdGVyKFwiY2F0ZWdvcnlcIikpLmZpbHRlcihnZXRGaWx0ZXIoXCJjb3N0XCIpKS5maWx0ZXIoZ2V0RmlsdGVyKFwiZmVhdHVyZXNcIikpLmZpbHRlcihnZXRGaWx0ZXIoXCJyYXRpbmdcIikpO1xuICAgICAgICBhbGwubm90KHRndHMpLmhpZGUoKTtcbiAgICAgICAgdGd0cy5zaG93KCk7XG4gICAgfSk7XG5cbiAgICAvLyBSZWZ1bmRzIGFjY29yZGlvblxuXG4gICAgJCgnLmFjY29yZGlvbiAuYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcbiAgICB9KTtcbn0pO1xuXG4vLyBBT1NcblxuQU9TLmluaXQoe1xuICAgIG9uY2U6IGZhbHNlLFxufSk7XG5cbiQoIGRvY3VtZW50ICkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAvLyBJbnRlcmNvbSBvbiBtb2JpbGVcblxuICAgIC8vIHZhciBpc09uTW9iaWxlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoIDw9IDgwMCkge1xuICAgIC8vICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgLy8gICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9O1xuICAgIC8vXG4gICAgLy8gY29uc29sZS5sb2coaXNPbk1vYmlsZSgpKTtcbiAgICAvL1xuICAgIC8vIHdpbmRvdy5pbnRlcmNvbVNldHRpbmdzID0ge1xuICAgIC8vICAgICBhcHBfaWQ6ICd0dDI5Y2ZoOScsXG4gICAgLy8gICAgIGVtYWlsOiAnc2F0aGlzaEBsaW1lY2FsbC5jb20nLFxuICAgIC8vICAgICBoaWRlX2RlZmF1bHRfbGF1bmNoZXI6IGlzT25Nb2JpbGUoKVxuICAgIC8vIH07XG5cbn0pOyJdfQ==
